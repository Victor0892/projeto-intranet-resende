<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pesquisa - Intranet da Prefeitura Municipal de Resende">
    <meta name="author" content="SuMTI - Prefeitura de Resende">
    <title>Resultados da Pesquisa - Prefeitura de Resende</title>

    <!-- Favicon -->
    <link rel="icon" href="../imagens/favicons.png" type="image/png">

    <!-- Pré-conexão para melhor performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- CSS do Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Fonte Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Seu CSS personalizado -->
    <link rel="stylesheet" href="../css/styles.css">

    <!-- CSS do widget de clima -->
    <link rel="stylesheet" href="../css/weather.css">

    <style>
        .search-hero {
            background: linear-gradient(135deg, var(--azul-prefeitura) 0%, var(--azul-escuro) 100%);
            color: white;
            padding: 3rem 0;
        }

        .result-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left-color: var(--verde-prefeitura);
        }

        .result-title {
            color: var(--azul-prefeitura);
            font-weight: 600;
        }

        .result-card:hover .result-title {
            color: var(--verde-prefeitura);
        }

        .result-badge {
            background-color: var(--verde-prefeitura);
            color: white;
            font-size: 0.75rem;
            padding: 0.35em 0.65em;
            border-radius: 4px;
        }

        .highlight {
            background-color: #fff3cd;
            padding: 0.1rem 0.25rem;
            border-radius: 3px;
            font-weight: 500;
        }

        .search-stats {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .no-results {
            text-align: center;
            padding: 3rem;
        }

        .no-results-icon {
            font-size: 4rem;
            color: #dee2e6;
            margin-bottom: 1rem;
        }

        .search-suggestions {
            margin-top: 1.5rem;
        }

        .suggestion-pill {
            display: inline-block;
            background-color: #e9ecef;
            color: #495057;
            padding: 0.35em 0.65em;
            border-radius: 50rem;
            margin: 0.25rem;
            font-size: 0.875rem;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .suggestion-pill:hover {
            background-color: var(--verde-prefeitura);
            color: white;
            transform: translateY(-2px);
        }

        .search-filters {
            background-color: #f8f8fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .filter-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--azul-prefeitura);
        }

        /* Correção para modo escuro - Filtros de pesquisa */
        body.dark-theme .search-filters {
            background-color: var(--bg-secondary) !important;
            border: 1px solid var(--border-color);
        }

        body.dark-theme .filter-title {
            color: var(--text-primary) !important;
        }

        body.dark-theme .form-label {
            color: var(--text-primary) !important;
        }

        body.dark-theme .form-check-label {
            color: var(--text-primary) !important;
        }

        body.dark-theme .search-filters .form-select {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border-color: var(--border-color);
        }

        body.dark-theme .search-filters .form-select:focus {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border-color: var(--verde-prefeitura);
            box-shadow: 0 0 0 0.2rem rgba(169, 202, 72, 0.25);
        }

        body.dark-theme .search-filters .form-control {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border-color: var(--border-color);
        }

        /* Garantir que o texto dentro dos filtros seja visível no modo escuro */
        body.dark-theme .search-stats,
        body.dark-theme .search-stats strong {
            color: var(--text-secondary) !important;
        }

        /* Correção para as sugestões de pesquisa no modo escuro */
        body.dark-theme .suggestion-pill {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        body.dark-theme .suggestion-pill:hover {
            background-color: var(--verde-prefeitura);
            color: white;
        }
    </style>
</head>

<body>

    <div class="top-navbar bg-darker py-1">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="accessibility-tools">
                <button id="font-decrease" class="btn btn-sm btn-outline-light" aria-label="Diminuir fonte">A-</button>
                <button id="font-reset" class="btn btn-sm btn-outline-light mx-1" aria-label="Fonte normal">A</button>
                <button id="font-increase" class="btn btn-sm btn-outline-light" aria-label="Aumentar fonte">A+</button>
            </div>
            <div class="social-links">
                <a href="https://www.facebook.com/prefeituraderesende" class="text-white mx-2 social-icon"
                    aria-label="Facebook">
                    <i class="bi bi-facebook"></i>
                </a>
                <a href="https://www.instagram.com/prefresende/" class="text-white mx-2 social-icon"
                    aria-label="Instagram">
                    <i class="bi bi-instagram"></i>
                </a>
                <a href="https://t.me/PrefResende" class="text-white mx-2 social-icon" aria-label="Telegram">
                    <i class="bi bi-telegram"></i>
                </a>
                <a href="https://www.youtube.com/channel/UC6p-O69J9UuvPsAYsAWS9QQ" class="text-white mx-2 social-icon"
                    aria-label="YouTube">
                    <i class="bi bi-youtube"></i>
                </a>
            </div>
            <div class="theme-switcher">
                <button id="theme-toggle" class="btn btn-sm btn-outline-light">
                    <i class="bi bi-moon-fill"></i> Modo Escuro
                </button>
            </div>
        </div>
    </div>

    <!-- Estrutura modificada -->
    <header class="navbar-wrapper">
        <!-- Video Background com fallback -->
        <video id="navbar-video" autoplay muted playsinline>
            <source src="../imagens/bg-header-digital.mp4" type="video/mp4">
            <img src="../imagens/bg-header.jpg" alt="Header background" class="img-fallback">
        </video>

        <!-- Navbar Bootstrap -->
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container">
                <a class="navbar-brand" href="https://www.resende.rj.gov.br" target="_blank" rel="noopener noreferrer">
                    <img src="../imagens/logo.webp" alt="Logo Prefeitura - Ir para site oficial" width="110"
                        height="145" class="logo-navbar" loading="lazy">
                </a>
                <a class="navbar-brand" href="http://inteligente.resende.rj.gov.br/" target="_blank"
                    rel="noopener noreferrer">
                    <img src="../imagens/LogoResendeOnLine.jpg" alt="Logo Resende Online - Ir para site oficial"
                        width="170" height="50" class="logo-navbar ms-2" loading="lazy">
                </a>
                <div id="weather-widget-container" class="weather-widget-container"></div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuNav"
                    aria-label="Menu de navegação">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="menuNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="../index.html">
                                <i class="bi bi-house-door me-1"></i> Home
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                <i class="bi bi-list-ul me-1"></i> Sistemas
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="sistemas_saude.html"><i
                                            class="bi bi-heart-pulse me-2"></i>Saúde</a></li>
                                <li><a class="dropdown-item" href="sistemas_educacao.html"><i
                                            class="bi bi-book me-2"></i>Educação</a></li>
                                <li><a class="dropdown-item" href="sistemas_ouvidoria.html"><i
                                            class="bi bi-megaphone me-2"></i>Ouvidoria</a></li>
                                <li><a class="dropdown-item" href="suporte.html"><i
                                            class="bi bi-question-circle me-2"></i>Instalações(Suporte Remoto)</a></li>
                                <li><a class="dropdown-item" href="chamados.html"><i
                                            class="bi bi-question-circle me-2"></i>SUMTI GLPI</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="lista_telefonica.html">
                                <i class="bi bi-person-lines-fill me-1"></i> Contatos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="clima.html" aria-current="page">
                                <i class="bi bi-cloud-sun me-1"></i> Clima
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://webmail.resende.rj.gov.br/">
                                <i class="bi bi-envelope me-1"></i> Webmail
                            </a>
                        </li>
                    </ul>

                    <!-- Barra de Pesquisa -->
                    <form class="d-flex ms-lg-3 mt-2 mt-lg-0" id="search-form" role="search">
                        <div class="input-group">
                            <label for="search-input" class="visually-hidden">Termo de Pesquisa</label>

                            <input class="form-control" type="search" id="search-input" name="q" required
                                placeholder="Pesquisar..." aria-label="Pesquisar" aria-describedby="search-button">

                            <button class="btn btn-outline-light" type="submit" id="search-button" aria-label="Buscar">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </nav>

        <!-- Navbar decorativa -->
        <div class="decorative-navbar">
            <div class="color-section left-color"></div>
            <div class="color-section middle-color"></div>
            <div class="color-section right-color"></div>
        </div>
    </header>

    <!-- Conteúdo Principal -->
    <main>
        <!-- Hero Section para Pesquisa -->
        <section class="search-hero">
            <div class="container py-4">
                <div class="row align-items-center">
                    <div class="col-lg-8 mx-auto text-center">
                        <h1 class="fw-bold display-5 mb-3">Resultados da Pesquisa</h1>
                        <p class="lead mb-4">Encontre informações em toda a intranet da Prefeitura de Resende</p>

                        <!-- Barra de pesquisa na página de resultados -->
                        <div class="mt-4">
                            <form class="d-flex" id="results-search-form" role="search">
                                <div class="input-group input-group-lg">
                                    <input class="form-control" type="search" id="results-search-input"
                                        placeholder="Digite sua pesquisa..." aria-label="Pesquisar"
                                        aria-describedby="results-search-button">
                                    <button class="btn btn-primary" type="submit" id="results-search-button"
                                        aria-label="Buscar">
                                        <i class="bi bi-search"></i> Pesquisar
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Navbar decorativa -->
        <div class="decorative-navbar">
            <div class="color-section left-color"></div>
            <div class="color-section middle-color"></div>
            <div class="color-section right-color"></div>
        </div>

        <!-- Seção de Resultados -->
        <section class="py-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3">
                        <!-- Filtros de pesquisa -->
                        <div class="search-filters">
                            <h4 class="filter-title">Filtrar por</h4>

                            <div class="mb-3">
                                <label class="form-label fw-semibold">Categoria</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filter-all" checked>
                                    <label class="form-check-label" for="filter-all">
                                        Todas as categorias
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filter-systems">
                                    <label class="form-check-label" for="filter-systems">
                                        Sistemas
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filter-support">
                                    <label class="form-check-label" for="filter-support">
                                        Suporte
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filter-contacts">
                                    <label class="form-check-label" for="filter-contacts">
                                        Contatos
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filter-services">
                                    <label class="form-check-label" for="filter-services">
                                        Serviços
                                    </label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label fw-semibold">Ordenar por</label>
                                <select class="form-select" id="sort-results">
                                    <option value="relevance" selected>Relevância</option>
                                    <option value="title">Título (A-Z)</option>
                                    <option value="title-desc">Título (Z-A)</option>
                                    <!-- <option value="newest">Mais recente</option>
                                    <option value="oldest">Mais antigo</option> -->
                                </select>
                            </div>

                            <button class="btn btn-primary w-100" id="apply-filters">Aplicar Filtros</button>
                        </div>
                    </div>

                    <div class="col-lg-9">
                        <div class="search-stats mb-4" id="search-stats">
                            <!-- Estatísticas de pesquisa serão preenchidas via JavaScript -->
                        </div>

                        <div id="search-results">
                            <!-- Resultados serão preenchidos via JavaScript -->
                        </div>

                        <div id="no-results" class="no-results" style="display: none;">
                            <div class="no-results-icon">
                                <i class="bi bi-search"></i>
                            </div>
                            <h3>Nenhum resultado encontrado</h3>
                            <p class="text-muted">Não encontramos resultados para sua pesquisa. Tente outros termos.</p>

                            <div class="search-suggestions">
                                <p>Sugestões:</p>
                                <a href="#" class="suggestion-pill">Sistema Betha</a>
                                <a href="#" class="suggestion-pill">Suporte Técnico</a>
                                <a href="#" class="suggestion-pill">Portal da Educação</a>
                                <a href="#" class="suggestion-pill">Ouvidoria Online</a>
                                <a href="#" class="suggestion-pill">Lista Telefônica</a>
                            </div>
                        </div>

                        <!-- Paginação -->
                        <nav aria-label="Navegação de resultados" class="mt-5" id="pagination" style="display: none;">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
                                </li>
                                <li class="page-item active" aria-current="page">
                                    <a class="page-link" href="#">1</a>
                                </li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">Próxima</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Navbar decorativa -->
    <div class="decorative-navbar">
        <div class="color-section left-color"></div>
        <div class="color-section middle-color"></div>
        <div class="color-section right-color"></div>
    </div>

    <!-- Rodapé -->
    <footer class="bg-darker text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3 mb-md-0">
                    <a href="https://www.resende.rj.gov.br" target="_blank" rel="noopener noreferrer">
                        <img src="../imagens/logo.webp" alt="Logo Prefeitura - Ir para site oficial" width="110"
                            height="145" class="logo-navbar" loading="lazy">
                    </a>
                    <p>Intranet Corporativa</p>
                </div>
                <div class="col-md-4 mb-3 mb-md-0">
                    <h3>SuMTI - Contato</h3>
                    <p><i class="bi bi-telephone me-2"></i> (24) 3354-8181</p>
                    <p><i class="bi bi-envelope me-2"></i> sumti@resende.rj.gov.br</p>
                    <p><i class="bi bi-clock me-2"></i> <strong>Expediente:</strong> De segunda a sexta-feira, de 12h às
                        18h.</p>
                </div>
                <div class="col-md-4">
                    <h3>Links Rápidos</h3>
                    <ul class="list-unstyled">
                        <li><a href="http://portalservidor.resende.rj.gov.br/"
                                class="text-white text-decoration-none">Portal do Servidor</a></li>
                        <li><a href="https://resende.rj.gov.br/blogtransparencia/page/index.asp"
                                class="text-white text-decoration-none">Portal Transparência</a></li>
                        <li><a href="https://resende.rj.gov.br/servicos/portal-da-pessoa-com-deficiencia"
                                class="text-white text-decoration-none">Portal da Pessoa com Deficiência</a></li>
                                <li><a href="https://transparencia.betha.cloud/#/mLjqO7Hq0-hN_1MV2wA28A==/consulta/11420?esconderCabecalho=S&esconderMenu=S&esconderRodape=S"
                                class="text-white text-decoration-none">Licitações</a></li>
                        <li><a href="https://resende.rj.gov.br/blogtransparencia/page/boletim_oficial.asp"
                                class="text-white text-decoration-none">Boletim Oficial</a></li>
                        <li><a href="https://e-gov.betha.com.br/cdweb/03114-520/main.faces"
                                class="text-white text-decoration-none">IPTU</a></li>
                        <li><a href="https://resende.rj.gov.br/servicos/transporte-publico"
                                class="text-white text-decoration-none">Transporte Público</a></li>

                    </ul>
                </div>
            </div>
            <hr class="my-4 bg-light">
            <div class="text-center">
                <p class="mb-0">&copy; SuMTI - SUPERINTENDÊNCIA MUNICIPAL DE TECNOLOGIA DA INFORMAÇÃO<br>
                    PMR © 2025 Todos os direitos reservados</p>
            </div>
        </div>
    </footer>

    <!-- JS do Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script de Pesquisa Aprimorado -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchForm = document.getElementById('search-form');

            // Submissão do formulário - REDIRECIONAR para pesquisa.html
            if (searchForm) {
                searchForm.addEventListener('submit', function (e) {
                    e.preventDefault();
                    const searchInput = document.getElementById('search-input');
                    const term = searchInput.value.trim();

                    if (term) {
                        // Redirecionar para a página de pesquisa com o termo
                        window.location.href = 'pesquisa.html?q=' + encodeURIComponent(term);
                    }
                });
            }
        });
    </script>

    <!-- Script para a página de pesquisa -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Dados de exemplo para a pesquisa (simulando conteúdo de todas as páginas)
            const searchData = [
                {
                    title: "Sistema Betha",
                    content: "Sistema que permite o controle e gerenciamento em tempo real de todas as fases e operações realizadas nos protocolos abertos juntamente a administração pública.",
                    url: "betha.html",
                    category: "Sistemas",
                    lastUpdate: "2024-01-15"
                },
                {
                    title: "Suporte Técnico de Informática",
                    content: "Canais exclusivos para atendimento de chamados de suporte técnico de informática. Atendimento via WhatsApp e sistema GLPI.",
                    url: "chamados.html",
                    category: "Suporte",
                    lastUpdate: "2024-02-20"
                },
                {
                    title: "Lista Telefônica",
                    content: "Encontre os contatos de todos os setores da Prefeitura Municipal de Resende. Busque por departamentos ou telefones específicos.",
                    url: "lista_telefonica.html",
                    category: "Contatos",
                    lastUpdate: "2024-01-10"
                },
                {
                    title: "Sistemas de Educação",
                    content: "Acesso aos sistemas de educação utilizados pela Prefeitura Municipal de Resende, incluindo PGEM e Portal da Educação.",
                    url: "sistemas_educacao.html",
                    category: "Sistemas",
                    lastUpdate: "2024-03-05"
                },
                {
                    title: "Sistemas de Ouvidoria",
                    content: "Canais de comunicação para manifestações, sugestões, elogios e reclamações da população. Inclui e-SIC, Fala.BR e Portal da Transparência.",
                    url: "sistemas_ouvidoria.html",
                    category: "Sistemas",
                    lastUpdate: "2024-02-28"
                },
                {
                    title: "Sistemas de Saúde",
                    content: "Acesso aos principais sistemas de saúde utilizados pela Prefeitura Municipal de Resende, incluindo CADSUS, e-SUS, SISREG e HÓRUS.",
                    url: "sistemas_saude.html",
                    category: "Sistemas",
                    lastUpdate: "2024-03-12"
                },
                {
                    title: "Suporte ao Usuário",
                    content: "Suporte técnico especializado para agilizar o atendimento. Download do Quick Suporte e informações de contato.",
                    url: "suporte.html",
                    category: "Suporte",
                    lastUpdate: "2024-02-15"
                },
                {
                    title: "Portal do Servidor",
                    content: "Acesso aos serviços de RH, holerite, benefícios e informações funcionais para servidores da Prefeitura de Resende.",
                    url: "http://portalservidor.resende.rj.gov.br/",
                    category: "Serviços",
                    lastUpdate: "2024-01-20"
                },
                {
                    title: "Webmail Institucional",
                    content: "Acesso ao sistema de e-mail corporativo da Prefeitura Municipal de Resende.",
                    url: "https://webmail.resende.rj.gov.br/",
                    category: "Comunicação",
                    lastUpdate: "2024-01-05"
                },
                {
                    title: "Prefeitura de Resende",
                    content: "Portal oficial da Prefeitura Municipal de Resende. Acesse notícias, serviços e informações sobre a cidade.",
                    url: "https://www.resende.rj.gov.br",
                    category: "Institucional",
                    lastUpdate: "2024-03-15"
                },
                {
                    title: "Sistema Eletrônico de Informações (SEI)",
                    content: "Sistema oficial para criação, edição, assinatura e trâmite de documentos e processos administrativos eletrônicos.",
                    url: "https://resende.rj.gov.br/sistema-eletronico-de-informacoes", // Altere para o link correto do seu SEI
                    category: "Sistemas",
                    lastUpdate: "2024-03-25"
                }

            ];

            // Obter termo de pesquisa da URL
            const urlParams = new URLSearchParams(window.location.search);
            const searchTerm = urlParams.get('q') || '';

            // Preencher a barra de pesquisa com o termo
            document.getElementById('results-search-input').value = searchTerm;

            // Executar pesquisa se houver termo
            if (searchTerm) {
                performSearch(searchTerm);
            } else {
                showNoResults();
            }

            // Configurar o formulário de pesquisa da página de resultados
            document.getElementById('results-search-form').addEventListener('submit', function (e) {
                e.preventDefault();
                const term = document.getElementById('results-search-input').value.trim();
                if (term) {
                    // Atualizar a URL com o novo termo de pesquisa
                    window.location.href = `pesquisa.html?q=${encodeURIComponent(term)}`;
                }
            });

            // Configurar filtros
            document.getElementById('apply-filters').addEventListener('click', function () {
                if (searchTerm) {
                    performSearch(searchTerm);
                }
            });

            // Configurar ordenação
            document.getElementById('sort-results').addEventListener('change', function () {
                if (searchTerm) {
                    performSearch(searchTerm);
                }
            });

            // Função para realizar a pesquisa
            function performSearch(term) {
                const searchTerm = term.toLowerCase();
                const sortBy = document.getElementById('sort-results').value;

                // Obter categorias selecionadas
                const selectedCategories = [];
                if (document.getElementById('filter-systems').checked) selectedCategories.push('Sistemas');
                if (document.getElementById('filter-support').checked) selectedCategories.push('Suporte');
                if (document.getElementById('filter-contacts').checked) selectedCategories.push('Contatos');
                if (document.getElementById('filter-services').checked) selectedCategories.push('Serviços');

                // Se "Todas" estiver selecionada ou nenhuma categoria específica, pesquisar em todas
                const allSelected = document.getElementById('filter-all').checked || selectedCategories.length === 0;

                let results = searchData.filter(item =>
                    (item.title.toLowerCase().includes(searchTerm) ||
                        item.content.toLowerCase().includes(searchTerm) ||
                        item.category.toLowerCase().includes(searchTerm)) &&
                    (allSelected || selectedCategories.includes(item.category))
                );

                // Ordenar resultados
                results = sortResults(results, sortBy, searchTerm);

                displayResults(results, searchTerm);
            }

            // Função para ordenar resultados
            function sortResults(results, sortBy, searchTerm) {
                switch (sortBy) {
                    case 'title':
                        return results.sort((a, b) => a.title.localeCompare(b.title));
                    case 'title-desc':
                        return results.sort((a, b) => b.title.localeCompare(a.title));
                    case 'relevance':
                    default:
                        // Ordenar por relevância (quantidade de ocorrências do termo)
                        return results.sort((a, b) => {
                            const aCount = (a.title.toLowerCase().split(searchTerm).length - 1) * 2 +
                                (a.content.toLowerCase().split(searchTerm).length - 1);
                            const bCount = (b.title.toLowerCase().split(searchTerm).length - 1) * 2 +
                                (b.content.toLowerCase().split(searchTerm).length - 1);
                            return bCount - aCount;
                        });
                }
            }

            // Função para exibir os resultados
            function displayResults(results, searchTerm) {
                const resultsContainer = document.getElementById('search-results');
                const noResults = document.getElementById('no-results');
                const searchStats = document.getElementById('search-stats');
                const pagination = document.getElementById('pagination');

                // Atualizar estatísticas
                searchStats.innerHTML = `Encontramos <strong>${results.length}</strong> resultado(s) para: <strong>"${searchTerm}"</strong>`;

                if (results.length === 0) {
                    resultsContainer.style.display = 'none';
                    noResults.style.display = 'block';
                    pagination.style.display = 'none';
                    return;
                }

                noResults.style.display = 'none';
                resultsContainer.style.display = 'block';

                // Limpar resultados anteriores
                resultsContainer.innerHTML = '';

                // Adicionar novos resultados
                results.forEach(result => {
                    const highlightedTitle = highlightTerm(result.title, searchTerm);
                    const highlightedContent = highlightTerm(result.content.substring(0, 150) + '...', searchTerm);

                    const resultElement = document.createElement('div');
                    resultElement.className = 'card result-card mb-3';
                    resultElement.innerHTML = `
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <h5 class="result-title mb-0">${highlightedTitle}</h5>
                    <span class="result-badge">${result.category}</span>
                </div>
                <p class="card-text">${highlightedContent}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="${result.url}" class="btn btn-sm btn-outline-primary">Acessar</a>
                </div>
            </div>
        `;

                    resultsContainer.appendChild(resultElement);
                });

                // Mostrar paginação apenas se houver mais de 6 resultados
                if (results.length > 6) {
                    updatePagination(results.length);
                } else {
                    pagination.style.display = 'none';
                }
            }

            // Função para atualizar a paginação com base no número de resultados
            function updatePagination(totalResults) {
                const pagination = document.getElementById('pagination');
                const itemsPerPage = 6;
                const totalPages = Math.ceil(totalResults / itemsPerPage);

                // Se houver apenas 1 página, esconder a paginação
                if (totalPages <= 1) {
                    pagination.style.display = 'none';
                    return;
                }

                let paginationHTML = `
        <ul class="pagination justify-content-center">
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
            </li>
    `;

                // Adicionar números de página
                for (let i = 1; i <= totalPages; i++) {
                    if (i === 1) {
                        paginationHTML += `<li class="page-item active" aria-current="page"><a class="page-link" href="#">${i}</a></li>`;
                    } else {
                        paginationHTML += `<li class="page-item"><a class="page-link" href="#">${i}</a></li>`;
                    }
                }

                paginationHTML += `
            <li class="page-item">
                <a class="page-link" href="#">Próxima</a>
            </li>
        </ul>
    `;

                pagination.innerHTML = paginationHTML;
                pagination.style.display = 'block';

                // Adicionar event listeners para os links de paginação
                const pageLinks = pagination.querySelectorAll('.page-link');
                pageLinks.forEach(link => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();
                        // Implementar lógica de mudança de página aqui se necessário
                    });
                });
            }

            // Função para destacar o termo pesquisado
            function highlightTerm(text, term) {
                if (!term) return text;
                const regex = new RegExp(`(${term})`, 'gi');
                return text.replace(regex, '<span class="highlight">$1</span>');
            }

            // Função para formatar data
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('pt-BR');
            }

            // Função para mostrar mensagem de nenhum resultado
            function showNoResults() {
                const resultsContainer = document.getElementById('search-results');
                const noResults = document.getElementById('no-results');
                const searchStats = document.getElementById('search-stats');
                const pagination = document.getElementById('pagination');

                resultsContainer.style.display = 'none';
                noResults.style.display = 'block';
                pagination.style.display = 'none';
                searchStats.innerHTML = 'Digite um termo na barra de pesquisa para encontrar conteúdo na intranet';
            }
        });
    </script>

    <!-- Scripts de acessibilidade e tema (reutilizados das outras páginas) -->
    <script>
        // Controles de Fonte
        const html = document.documentElement;
        const fontDecrease = document.getElementById('font-decrease');
        const fontReset = document.getElementById('font-reset');
        const fontIncrease = document.getElementById('font-increase');

        const changeFontSize = (operation) => {
            const currentSize = parseFloat(getComputedStyle(html).fontSize);
            let newSize;

            if (operation === 'increase') newSize = Math.min(currentSize * 1.1, 20);
            else if (operation === 'decrease') newSize = Math.max(currentSize * 0.9, 14);
            else newSize = 16; // Reset

            html.style.fontSize = `${newSize}px`;
            localStorage.setItem('fontSize', newSize);
        };

        if (fontIncrease) fontIncrease.addEventListener('click', () => changeFontSize('increase'));
        if (fontDecrease) fontDecrease.addEventListener('click', () => changeFontSize('decrease'));
        if (fontReset) fontReset.addEventListener('click', () => changeFontSize('reset'));

        // Sistema aprimorado de tema claro/escuro
        document.addEventListener('DOMContentLoaded', function () {
            const themeToggle = document.getElementById('theme-toggle');
            if (!themeToggle) return;

            const icon = themeToggle.querySelector('i');
            const body = document.body;

            // Verificar tema salvo ou preferência do sistema
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            // Aplicar tema inicial
            if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
                enableDarkMode();
            } else {
                enableLightMode();
            }

            // Alternar tema ao clicar
            themeToggle.addEventListener('click', function () {
                if (body.classList.contains('light-theme')) {
                    enableDarkMode();
                } else {
                    enableLightMode();
                }
            });

            function enableDarkMode() {
                body.classList.remove('light-theme');
                body.classList.add('dark-theme');
                document.documentElement.setAttribute('data-bs-theme', 'dark');
                icon.className = 'bi bi-sun-fill';
                themeToggle.innerHTML = '<i class="bi bi-sun-fill"></i> Modo Claro';
                localStorage.setItem('theme', 'dark');
            }

            function enableLightMode() {
                body.classList.remove('dark-theme');
                body.classList.add('light-theme');
                document.documentElement.removeAttribute('data-bs-theme');
                icon.className = 'bi bi-moon-fill';
                themeToggle.innerHTML = '<i class="bi bi-moon-fill"></i> Modo Escuro';
                localStorage.setItem('theme', 'light');
            }

            // Observar mudanças na preferência do sistema
            const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
            mediaQuery.addEventListener('change', e => {
                // Só mudar se não houver preferência salva
                if (!localStorage.getItem('theme')) {
                    if (e.matches) {
                        enableDarkMode();
                    } else {
                        enableLightMode();
                    }
                }
            });
        });

        // Comportamento de scroll para navbar compacta
        document.addEventListener('DOMContentLoaded', function () {
            const navbarWrapper = document.querySelector('.navbar-wrapper');
            const navbar = document.querySelector('.navbar');
            const navbarVideo = document.getElementById('navbar-video');

            if (!navbarWrapper) return;

            let lastScrollTop = 0;

            window.addEventListener('scroll', function () {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                // Comportamento de mostrar/esconder navbar no scroll
                if (scrollTop > lastScrollTop && scrollTop > 100) {
                    // Scroll para baixo - esconder navbar
                    navbarWrapper.style.transform = 'translateY(-100%)';
                } else {
                    // Scroll para cima - mostrar navbar
                    navbarWrapper.style.transform = 'translateY(0)';

                    // Adicionar classe compacta quando scroll > 50px
                    if (scrollTop > 50) {
                        navbarWrapper.classList.add('navbar-compact');
                        if (navbar) navbar.classList.add('navbar-compact');
                        if (navbarVideo) navbarVideo.classList.add('navbar-compact');
                        document.body.style.paddingTop = '110px';
                    } else {
                        navbarWrapper.classList.remove('navbar-compact');
                        if (navbar) navbar.classList.remove('navbar-compact');
                        if (navbarVideo) navbarVideo.classList.remove('navbar-compact');
                        document.body.style.paddingTop = '180px';
                    }
                }

                lastScrollTop = scrollTop;
            });

            // Prevenir que o vídeo trave em alguns dispositivos móveis
            const videos = document.querySelectorAll('video');
            videos.forEach(video => {
                video.addEventListener('loadedmetadata', function () {
                    if (video.readyState >= 3) {
                        video.play().catch(e => {
                            console.log('Autoplay prevented:', e);
                            // Fallback para imagem se autoplay falhar
                            const fallback = video.parentElement.querySelector('.img-fallback');
                            if (fallback) {
                                video.style.display = 'none';
                                fallback.style.display = 'block';
                            }
                        });
                    }
                });

                // Tentar reproduzir novamente quando o vídeo entrar na viewport
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            video.play().catch(e => console.log('Video play failed:', e));
                        } else {
                            video.pause();
                        }
                    });
                }, { threshold: 0.5 });

                observer.observe(video);
            });
        });
    </script>

    <script src="js/search.js"></script>
    <!-- Widget de Clima -->
    <script src="../js/weather.js"></script>
<script src="../js/alert_handler.js"></script>
</body>

</html>